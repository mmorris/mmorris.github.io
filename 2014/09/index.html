<!DOCTYPE html>
<html lang="en-US" class="no-js"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="profile" href="http://gmpg.org/xfn/11"><script>(function(html){html.className = html.className.replace(/\bno-js\b/,'js')})(document.documentElement);</script><title>September 2014 &ndash; Matt Morris</title><link rel="alternate" type="application/rss+xml" title="Matt Morris &raquo; Feed" href="https://matt.ph/feed/"><link rel="alternate" type="application/rss+xml" title="Matt Morris &raquo; Comments Feed" href="https://matt.ph/comments/feed/"><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"https:\/\/matt.ph\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.5.2"}};
			!function(a,b,c){function d(a){var c,d,e,f=b.createElement("canvas"),g=f.getContext&&f.getContext("2d"),h=String.fromCharCode;if(!g||!g.fillText)return!1;switch(g.textBaseline="top",g.font="600 32px Arial",a){case"flag":return g.fillText(h(55356,56806,55356,56826),0,0),f.toDataURL().length>3e3;case"diversity":return g.fillText(h(55356,57221),0,0),c=g.getImageData(16,16,1,1).data,d=c[0]+","+c[1]+","+c[2]+","+c[3],g.fillText(h(55356,57221,55356,57343),0,0),c=g.getImageData(16,16,1,1).data,e=c[0]+","+c[1]+","+c[2]+","+c[3],d!==e;case"simple":return g.fillText(h(55357,56835),0,0),0!==g.getImageData(16,16,1,1).data[0];case"unicode8":return g.fillText(h(55356,57135),0,0),0!==g.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style><link rel="stylesheet" id="jeherve_post_embed-css" href="https://matt.ph/wp-content/plugins/rest-api-post-embeds/style.css?ver=4.5.2" type="text/css" media="all"><link rel="stylesheet" id="parent-style-css" href="https://matt.ph/wp-content/themes/twentysixteen/style.css?ver=4.5.2" type="text/css" media="all"><link rel="stylesheet" id="child-style-css" href="https://matt.ph/wp-content/themes/twentysixteen-child/style.css?ver=4.5.2" type="text/css" media="all"><link rel="stylesheet" id="twentysixteen-fonts-css" href="https://fonts.googleapis.com/css?family=Merriweather%3A400%2C700%2C900%2C400italic%2C700italic%2C900italic%7CMontserrat%3A400%2C700%7CInconsolata%3A400&amp;subset=latin%2Clatin-ext" type="text/css" media="all"><link rel="stylesheet" id="genericons-css" href="https://matt.ph/wp-content/themes/twentysixteen/genericons/genericons.css?ver=3.4.1" type="text/css" media="all"><link rel="stylesheet" id="twentysixteen-style-css" href="https://matt.ph/wp-content/themes/twentysixteen-child/style.css?ver=4.5.2" type="text/css" media="all"><!--[if lt IE 10]>
<link rel='stylesheet' id='twentysixteen-ie-css'  href='https://matt.ph/wp-content/themes/twentysixteen/css/ie.css?ver=20160412' type='text/css' media='all' />
<![endif]--><!--[if lt IE 9]>
<link rel='stylesheet' id='twentysixteen-ie8-css'  href='https://matt.ph/wp-content/themes/twentysixteen/css/ie8.css?ver=20160412' type='text/css' media='all' />
<![endif]--><!--[if lt IE 8]>
<link rel='stylesheet' id='twentysixteen-ie7-css'  href='https://matt.ph/wp-content/themes/twentysixteen/css/ie7.css?ver=20160412' type='text/css' media='all' />
<![endif]--><link rel="stylesheet" id="recent-posts-widget-with-thumbnails-public-style-css" href="https://matt.ph/wp-content/plugins/recent-posts-widget-with-thumbnails/public.css?ver=4.10.2" type="text/css" media="all"><!--[if lt IE 9]>
<script type='text/javascript' src='https://matt.ph/wp-content/themes/twentysixteen/js/html5.js?ver=3.7.3'></script>
<![endif]--><script type="text/javascript" src="https://matt.ph/wp-includes/js/jquery/jquery.js?ver=1.12.3"></script><script type="text/javascript" src="https://matt.ph/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.0"></script><link rel="https://api.w.org/" href="https://matt.ph/wp-json/"><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://matt.ph/xmlrpc.php?rsd"><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://matt.ph/wp-includes/wlwmanifest.xml"><meta name="generator" content="WordPress 4.5.2"><link rel="icon" href="https://matt.ph/wp-content/uploads/2016/05/face_pixel.png" sizes="32x32"><link rel="icon" href="https://matt.ph/wp-content/uploads/2016/05/face_pixel.png" sizes="192x192"><link rel="apple-touch-icon-precomposed" href="https://matt.ph/wp-content/uploads/2016/05/face_pixel.png"><meta name="msapplication-TileImage" content="https://matt.ph/wp-content/uploads/2016/05/face_pixel.png"></head><body class="archive date no-sidebar hfeed">
<div id="page" class="site">
	<div class="site-inner">
		<a class="skip-link screen-reader-text" href="#content">Skip to content</a>

		<header id="masthead" class="site-header" role="banner"><div class="site-header-main">
				<div class="site-branding">
					
											<p class="site-title"><a href="https://matt.ph/" rel="home">Matt Morris</a></p>
									</div><!-- .site-branding -->

									<button id="menu-toggle" class="menu-toggle">Menu</button>

					<div id="site-header-menu" class="site-header-menu">
													<nav id="site-navigation" class="main-navigation" role="navigation" aria-label="Primary Menu"><div class="menu-menu-container"><ul id="menu-menu" class="primary-menu"><li id="menu-item-115" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-115"><a href="https://matt.ph">Home</a></li>
<li id="menu-item-188" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-188"><a href="https://matt.ph/about/">About</a></li>
<li id="menu-item-199" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-199"><a href="https://matt.ph/hire/">Hire</a></li>
<li id="menu-item-116" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-116"><a href="https://matt.ph/category/snippets/">&#128483;Snippets</a></li>
</ul></div>							</nav><!-- .main-navigation --></div><!-- .site-header-menu -->
							</div><!-- .site-header-main -->

					</header><!-- .site-header --><div id="content" class="site-content">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main"><header class="page-header"><h1 class="page-title">Month: September 2014</h1>			</header><!-- .page-header --><article id="post-95" class="post-95 post type-post status-publish format-standard hentry category-uncategorized"><header class="entry-header"><h2 class="entry-title"><a href="https://matt.ph/2014/09/27/scraping-passwords-from-in-app-browsers/" rel="bookmark">Scraping Passwords from In-App Browsers</a></h2>	</header><!-- .entry-header --><div class="entry-content">
		<p>Last night I saw <a href="https://twitter.com/chockenberry">Craig Hockenberry</a>&lsquo;s excellent post that explains a method that an iOS app can use to capture anything you type into an in-app browser.</p>
<p>Almost three years ago, I reported another way to eavesdrop on users&rsquo; keystrokes in an embedded browser (radar 10447976). It&rsquo;s a much more rudimentary attack than Craig&rsquo;s, but nevertheless it&rsquo;s a means for this information to be harvested.</p>
<p>Here is a dead simple <a href="https://github.com/mmorris/iOSPasswordGrab">sample project</a> that illustrates the attack. There are two factors that come into play.</p>
<ol><li>In a password field, each character is shown to the user for a brief moment.</li>
<li>Apps are allowed to do a screen-grab of their own window.</li>
</ol><p>Here is a screenshot of the sample app. The twitter login page is loaded into a WebView.</p>
<p><img class="size-medium wp-image-97 aligncenter" src="http://104.236.129.96/wp-content/uploads/2016/05/15330888336_e40936b96c_z-169x300.jpg" alt="15330888336_e40936b96c_z" width="300" srcset="https://matt.ph/wp-content/uploads/2016/05/15330888336_e40936b96c_z.jpg" sizes="(max-width: 169px) 85vw, 169px"></p>
<p>As you can see, the most recent character in my password is displayed as I type. Now, combine this with a fast firing timer that continually takes screengrabs of the web view, and voil&agrave;, you have the whole password. I was able to easily capture my entire Twitter password.</p>
<p>Now, you still have to piece the keystrokes together out of the screenshots, so it&rsquo;s not the most elegant attack, but in the end you still have the information.</p>
<p>When I reported this to Apple in 2011, they replied and said that they didn&rsquo;t see how this is a security issue. I guess I can understand, since it&rsquo;s pretty roundabout. Still, it would be nice if web views were bulletproof and completely trustworthy.</p>
<p>I agree with Craig that web views are great for quick and dirty views of webpages that aren&rsquo;t asking for sensitive information. Be wary of entering sensitive passwords into any <strong>app</strong>, even if it&rsquo;s showing you a webpage that isn&rsquo;t technically phishing.</p>
	</div><!-- .entry-content -->

	<footer class="entry-footer"><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://matt.ph/author/mmorris/">Matt Morris</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://matt.ph/2014/09/27/scraping-passwords-from-in-app-browsers/" rel="bookmark"><time class="entry-date published" datetime="2014-09-27T18:01:18+00:00">September 27, 2014</time><time class="updated" datetime="2016-05-01T18:02:32+00:00">May 1, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://matt.ph/category/uncategorized/" rel="category tag">Uncategorized</a></span>			</footer><!-- .entry-footer --></article><!-- #post-## --><article id="post-99" class="post-99 post type-post status-publish format-standard hentry category-uncategorized"><header class="entry-header"><h2 class="entry-title"><a href="https://matt.ph/2014/09/14/iphone-remote-control/" rel="bookmark">iPhone Remote Control</a></h2>	</header><!-- .entry-header --><div class="entry-content">
		<p>This video shows some work I did back in the iOS 6 era. It demonstrates full remote control of an unjailbroken iPhone. I used undocumented private APIs and other trickery to achieve this. Note that it even allows control of the physical buttons.</p>
<p>No, this was never shipped to the App Store.</p>
<p><iframe src="https://player.vimeo.com/video/106128815" width="840" height="473" frameborder="0" title="iPhone Remote Control" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></p>
	</div><!-- .entry-content -->

	<footer class="entry-footer"><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://matt.ph/author/mmorris/">Matt Morris</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://matt.ph/2014/09/14/iphone-remote-control/" rel="bookmark"><time class="entry-date published" datetime="2014-09-14T18:03:27+00:00">September 14, 2014</time><time class="updated" datetime="2016-05-01T18:04:11+00:00">May 1, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://matt.ph/category/uncategorized/" rel="category tag">Uncategorized</a></span>			</footer><!-- .entry-footer --></article><!-- #post-## --><article id="post-251" class="post-251 post type-post status-publish format-standard hentry category-uncategorized"><header class="entry-header"><h2 class="entry-title"><a href="https://matt.ph/2014/09/11/password-less-user-authentication/" rel="bookmark">Password-Less User Authentication</a></h2>	</header><!-- .entry-header --><div class="entry-content">
		<p>I&rsquo;m what you might call a client-side iOS programmer, but for my latest project I&rsquo;ve decided to roll my own backend. I&rsquo;ve been thinking about the authentication flow will be needed. I don&rsquo;t want users to remember usernames/passwords, and I don&rsquo;t really want to have to keep track of them.</p>
<p>Currently, for development, the backend just checks for a single unique token that the client must send with all requests. (Assume that I&rsquo;m using SSL Pinning to ensure that I&rsquo;m not connecting to a man in the middle.) This is okay when the app is just on my phone, but I can&rsquo;t very well ship the app with the token embedded. Even if it&rsquo;s obfuscated, there&rsquo;s no guaranteed way to prevent someone from unearthing the token and making rogue API requests. And by rogue API request, I mean any API request that&rsquo;s not a result of normal use of the app.</p>
<p>It really wouldn&rsquo;t be the end of the world if this happened. The only consequences I can think of is my database filling up with junk, or maybe someone could try to brute force their way into getting some semi-sensitive data out of the API.</p>
<p>So anyway, I&rsquo;d like to have some per-user, or per-device, token that I can use to authenticate API requests. I&rsquo;m thinking of trying the following password-less approach:</p>
<ul><li>User is prompted to enter an email to sign up for an account. At this time, a unique token is generated and sent to the API along with the email address. Token is stored in the keychain on the device.</li>
<li>User is prompted to check his email to continue. Offer a button to open Mail.app, GMail.app, or another mail app that&rsquo;s been detected.</li>
<li>Meanwhile, at the backend, an email is generated with a unique URL and sent to the user. Tapping this link will whitelist the token generated in (1), and kick the user back into the app.</li>
<li>From now on, whenever the app becomes active, it queries the API to test if the token is whitelisted. If a good token is not found in the keychain, then the app can go through the flow again to generate one. And this would give me a mechanism for blocking a token or email address that is acting suspiciously.
</li><li>
</li></ul><p>So this would let the app authenticate with the API without the need for a password. The downside is that the user will have to go through this flow on every new device. Perhaps I could store the token in iCloud to avoid that problem.</p>
<p>Questions:</p>
<ul><li>Is this a horrible idea? Could I somehow achieve this with OAuth?</li>
<li>Does it matter if the token is generated client-side or server-side?</li>
</ul></div><!-- .entry-content -->

	<footer class="entry-footer"><span class="byline"><span class="author vcard"><span class="screen-reader-text">Author </span> <a class="url fn n" href="https://matt.ph/author/mmorris/">Matt Morris</a></span></span><span class="posted-on"><span class="screen-reader-text">Posted on </span><a href="https://matt.ph/2014/09/11/password-less-user-authentication/" rel="bookmark"><time class="entry-date published" datetime="2014-09-11T12:33:00+00:00">September 11, 2014</time><time class="updated" datetime="2016-05-05T12:35:24+00:00">May 5, 2016</time></a></span><span class="cat-links"><span class="screen-reader-text">Categories </span><a href="https://matt.ph/category/uncategorized/" rel="category tag">Uncategorized</a></span>			</footer><!-- .entry-footer --></article><!-- #post-## --></main><!-- .site-main --></div><!-- .content-area -->



		</div><!-- .site-content -->

		<footer id="colophon" class="site-footer" role="contentinfo"><nav class="main-navigation" role="navigation" aria-label="Footer Primary Menu"><div class="menu-menu-container"><ul id="menu-menu-1" class="primary-menu"><li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-115"><a href="https://matt.ph">Home</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-188"><a href="https://matt.ph/about/">About</a></li>
<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-199"><a href="https://matt.ph/hire/">Hire</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-116"><a href="https://matt.ph/category/snippets/">&#128483;Snippets</a></li>
</ul></div>				</nav><!-- .main-navigation --><div class="site-info">
								<span class="site-title">&copy; 2004-2016 Matt Morris</span>
				<!-- MJM: Footer stuff here! -->
			</div><!-- .site-info -->
		</footer><!-- .site-footer --></div><!-- .site-inner -->
</div><!-- .site -->

<script type="text/javascript" src="https://matt.ph/wp-content/themes/twentysixteen/js/skip-link-focus-fix.js?ver=20160412"></script><script type="text/javascript">
/* <![CDATA[ */
var screenReaderText = {"expand":"expand child menu","collapse":"collapse child menu"};
/* ]]> */
</script><script type="text/javascript" src="https://matt.ph/wp-content/themes/twentysixteen/js/functions.js?ver=20160412"></script><script type="text/javascript" src="https://matt.ph/wp-includes/js/wp-embed.min.js?ver=4.5.2"></script></body></html>
